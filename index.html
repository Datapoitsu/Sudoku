<!-- -------------------- Sudoku -------------------- -->
<!-- Written By: Aarni Junkkala -->

<!DOCTYPE html>
<head>
    <title>Sudoku</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>Sudoku</h1>
    <p>Created By: Aarni Junkkala</p>
    <p id="difficultyText">Normal</p>
    <div class="game"></div>
    <br>
    <div class="settings">
        <button onclick="generateNewBoard(0.3,'Easy')" class="easy">Easy</button>
        <button onclick="generateNewBoard(0.5,'Normal')" class="normal">Normal</button>
        <button onclick="generateNewBoard(0.7,'Hard')" class="hard">Hard</button>
        <button onclick="reset()">Reset</button>
    </div>
    <br>
    <div class="settings">
        <input type="text" id="width" placeholder="Width">
        <input type="text" id="height" placeholder="Height">
    </div>
</body>

<script src="sudoku.js"></script>
<script>
    function addEvent(element, eventName, callback)
    {
        if (element.addEventListener)
        {
            element.addEventListener(eventName, callback, false);
        } else if (element.attachEvent)
        {
            element.attachEvent("on" + eventName, callback);
        } else
        {
            element["on" + eventName] = callback;
        }
    }

    addEvent(document, "keyup", function (e) {
        e = e || window.event;
        check();
    });

    function generateNewBoard(disapperanceRate,difficultyName)
    {
        //New board
        var width = document.getElementById("width").value;
        var height = document.getElementById("height").value;
        if(width == '' || width < 2){
            width = 3;
        }
        if(height == '' || height < 2){
            height = 3;
        }
        newDOMBoard(width,height);

        document.getElementById("difficultyText").innerHTML = difficultyName;
        for(var i = 0; i < Math.pow(width * height,2); i++){
            document.getElementById(i.toString()).disabled = false;
            document.getElementById(i.toString()).value = null;
        }
        newBoard(width,height,disapperanceRate);
    }

    function reset(){
        for(var i = 0; i < Math.pow(3,4); i++){
            if(document.getElementById(i.toString()).disabled == false){
                document.getElementById(i.toString()).value = null;
            }
        }
    }

    function check(width,height){
        var arr = [];
        for(var i = 0; i < Math.pow(width*height,2); i++)
        {
            if(document.getElementById(i.toString()).value == null){
                return;
            }
            arr.push(document.getElementById(i.toString()).value);
        }
        if(CheckSudoku(arr))
        {
            console.log("You Won!");
            for(var i = 0; i < Math.pow(width*height,2); i++)
            {
                var element = document.getElementById(i.toString())
                element.disabled = true;
                element.style.backgroundColor = "#99ff99";
            }
        }
    }

    function newDOMBoard(width,height)
    {
        var game = document.getElementsByClassName("game");
        console.log("")
        game.innerHTML = "";
        var cellIndex = 0;
        for(var row = 0; row < width * height; row++){
            const rowElement = document.createElement("div");
            rowElement.className = "row";
            for(var column = 0; column < width * height; column++)
            {
                const inputElement = document.createElement("input");
                inputElement.className = "cell";
                inputElement.id = cellIndex;
                inputElement.type = "text";
                inputElement.maxLength = 1;

                inputElement.style.backgroundColor = "#ffffff";
                inputElement.style.color = "#000000";
                /*if((column < 3 || column > 5) && (row < 3 || row > 5) || (column > 2 && column < 6 && row > 2 && row < 6))
                {
                    
                }*/
                if(column % 2 == 0 && row % 2 == 0 || column % 2 != 0 && row % 2 != 0){
                    inputElement.style.backgroundColor = "#d6d6d6";
                }
                
                rowElement.append(inputElement);
                cellIndex++;
            }
            document.getElementsByClassName("game").item(0).appendChild(rowElement);
        }
    }
    
    generateNewBoard(0.5,'Normal');
</script>